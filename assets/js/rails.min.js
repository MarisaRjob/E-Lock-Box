(function(b,d){if(b.rails!==d){b.error("jquery-ujs has already been loaded!")}var a;var c=b(document);b.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(f){var e=b('meta[name="csrf-token"]').attr("content");if(e){f.setRequestHeader("X-CSRF-Token",e)}},refreshCSRFTokens:function(){var e=b("meta[name=csrf-token]").attr("content");var f=b("meta[name=csrf-param]").attr("content");b('form input[name="'+f+'"]').val(e)},fire:function(h,e,g){var f=b.Event(e);h.trigger(f,g);return f.result!==false},confirm:function(e){return confirm(e)},ajax:function(e){return b.ajax(e)},href:function(e){return e.attr("href")},handleRemote:function(k){var e,f,j,n,h,i,m,o;if(a.fire(k,"ajax:before")){n=k.data("cross-domain");h=n===d?null:n;i=k.data("with-credentials")||null;m=k.data("type")||(b.ajaxSettings&&b.ajaxSettings.dataType);if(k.is("form")){e=k.attr("method");f=k.attr("action");j=k.serializeArray();var l=k.data("ujs:submit-button");if(l){j.push(l);k.data("ujs:submit-button",null)}}else{if(k.is(a.inputChangeSelector)){e=k.data("method");f=k.data("url");j=k.serialize();if(k.data("params")){j=j+"&"+k.data("params")}}else{if(k.is(a.buttonClickSelector)){e=k.data("method")||"get";f=k.data("url");j=k.serialize();if(k.data("params")){j=j+"&"+k.data("params")}}else{e=k.data("method");f=a.href(k);j=k.data("params")||null}}}o={type:e||"GET",data:j,dataType:m,beforeSend:function(q,p){if(p.dataType===d){q.setRequestHeader("accept","*/*;q=0.5, "+p.accepts.script)}return a.fire(k,"ajax:beforeSend",[q,p])},success:function(q,p,r){k.trigger("ajax:success",[q,p,r])},complete:function(q,p){k.trigger("ajax:complete",[q,p])},error:function(r,p,q){k.trigger("ajax:error",[r,p,q])},crossDomain:h};if(i){o.xhrFields={withCredentials:i}}if(f){o.url=f}var g=a.ajax(o);k.trigger("ajax:send",g);return g}else{return false}},handleMethod:function(j){var g=a.href(j),l=j.data("method"),k=j.attr("target"),e=b("meta[name=csrf-token]").attr("content"),h=b("meta[name=csrf-param]").attr("content"),i=b('<form method="post" action="'+g+'"></form>'),f='<input name="_method" value="'+l+'" type="hidden" />';if(h!==d&&e!==d){f+='<input name="'+h+'" value="'+e+'" type="hidden" />'}if(k){i.attr("target",k)}i.hide().append(f).appendTo("body");i.submit()},disableFormElements:function(e){e.find(a.disableSelector).each(function(){var f=b(this),g=f.is("button")?"html":"val";f.data("ujs:enable-with",f[g]());f[g](f.data("disable-with"));f.prop("disabled",true)})},enableFormElements:function(e){e.find(a.enableSelector).each(function(){var f=b(this),g=f.is("button")?"html":"val";if(f.data("ujs:enable-with")){f[g](f.data("ujs:enable-with"))}f.prop("disabled",false)})},allowAction:function(e){var f=e.data("confirm"),g=false,h;if(!f){return true}if(a.fire(e,"confirm")){g=a.confirm(f);h=a.fire(e,"confirm:complete",[g])}return g&&h},blankInputs:function(k,h,j){var g=b(),i,f,e=h||"input,textarea",l=k.find(e);l.each(function(){i=b(this);f=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val();if(!f===!j){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length){return true}g=g.add(i)}});return g.length?g:false},nonBlankInputs:function(f,e){return a.blankInputs(f,e,true)},stopEverything:function(f){b(f.target).trigger("ujs:everythingStopped");f.stopImmediatePropagation();return false},disableElement:function(e){e.data("ujs:enable-with",e.html());e.html(e.data("disable-with"));e.bind("click.railsDisable",function(f){return a.stopEverything(f)})},enableElement:function(e){if(e.data("ujs:enable-with")!==d){e.html(e.data("ujs:enable-with"));e.removeData("ujs:enable-with")}e.unbind("click.railsDisable")}};if(a.fire(c,"rails:attachBindings")){b.ajaxPrefilter(function(e,g,f){if(!e.crossDomain){a.CSRFProtection(f)}});c.delegate(a.linkDisableSelector,"ajax:complete",function(){a.enableElement(b(this))});c.delegate(a.linkClickSelector,"click.rails",function(j){var h=b(this),k=h.data("method"),i=h.data("params"),g=j.metaKey||j.ctrlKey;if(!a.allowAction(h)){return a.stopEverything(j)}if(!g&&h.is(a.linkDisableSelector)){a.disableElement(h)}if(h.data("remote")!==d){if(g&&(!k||k==="GET")&&!i){return true}var f=a.handleRemote(h);if(f===false){a.enableElement(h)}else{f.error(function(){a.enableElement(h)})}return false}else{if(h.data("method")){a.handleMethod(h);return false}}});c.delegate(a.buttonClickSelector,"click.rails",function(g){var f=b(this);if(!a.allowAction(f)){return a.stopEverything(g)}a.handleRemote(f);return false});c.delegate(a.inputChangeSelector,"change.rails",function(g){var f=b(this);if(!a.allowAction(f)){return a.stopEverything(g)}a.handleRemote(f);return false});c.delegate(a.formSubmitSelector,"submit.rails",function(k){var h=b(this),j=h.data("remote")!==d,g=a.blankInputs(h,a.requiredInputSelector),f=a.nonBlankInputs(h,a.fileInputSelector);if(!a.allowAction(h)){return a.stopEverything(k)}if(g&&h.attr("novalidate")==d&&a.fire(h,"ajax:aborted:required",[g])){return a.stopEverything(k)}if(j){if(f){setTimeout(function(){a.disableFormElements(h)},13);var i=a.fire(h,"ajax:aborted:file",[f]);if(!i){setTimeout(function(){a.enableFormElements(h)},13)}return i}a.handleRemote(h);return false}else{setTimeout(function(){a.disableFormElements(h)},13)}});c.delegate(a.formInputClickSelector,"click.rails",function(g){var f=b(this);if(!a.allowAction(f)){return a.stopEverything(g)}var e=f.attr("name"),h=e?{name:e,value:f.val()}:null;f.closest("form").data("ujs:submit-button",h)});c.delegate(a.formSubmitSelector,"ajax:beforeSend.rails",function(e){if(this==e.target){a.disableFormElements(b(this))}});c.delegate(a.formSubmitSelector,"ajax:complete.rails",function(e){if(this==e.target){a.enableFormElements(b(this))}});b(function(){a.refreshCSRFTokens()})}})(jQuery);